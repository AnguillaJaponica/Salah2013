Salah et al., 2013 の再現実験を行う。手法/詰まったところのメモとともにコードを管理する。

論文へのリンク: https://link.springer.com/chapter/10.1007/978-3-642-53914-5_2

# サマリ

全体的なステップとしては以下を行う。

1. 品詞タギング
1. 前処理
1. センチメントスコアと極性の決定
1. 辞書の生成

## 品詞タギング(POST: Part of Speech Tagging)

品詞タギングにより、異なる品詞の関連語への適切なセンチメントスコアの付与・語義曖昧性の解消を行う。

入力の各単語に、その文脈に応じて特定の品詞タグをつける。この論文では TAIParse3 という品詞タグ付けツールを使用している。

http://www.textanalysis.com/help/taiparse.htm

論文が書かれた当時のバージョンでは 94% の精度を誇っている(らしい)。POST ステップが終了すると、用語 T = {$t_1,t_2,...,t_m$} のリストができ、それぞれが品詞タグ $post_i$ と関連付けられる。POST を実行しないと、POST に必要な用語間の意味的な差異が失われるため、POST は前処理（下記参照）の前に実行されなければならないことに注意する。

## 前処理

1. 大文字のアルファベットを小文字に変換し、その後、句読点と数字を除去する
1. 品詞タギングのステップで得られた用語リスト T が与えられたら、T 中のすべての ${t_i}$（入力文書コレクション D 中のすべての用語）に対して BOW（Bag-Of-Words）表現を作成する。BOW の各用語 $t_i$ は、以下の形式のタプルを用いて定義される。

$<t_i, post_i, tf_i+, tf_i-, df_i+, df_i->$

- $t_i$: 注目項（項番号 i）
- $post_i$: POS タグ
- $tf_i$+: 肯定的な態度を示すテキスト（政治演説の場合、「賛成」のラベルを付けたテキスト） に関する関連用語頻度（テキストコレクション内で用語 t_i が出現する回数）
- $tf_i$-: は否定的な態度を示すテキスト（政治演説の場合、「反対」のラベルを付けたテキスト）に関する関連用語頻度
- $df_i$+: 肯定的な態度を示すテキスト（「賛成」ラベルの付いたテキスト）に対する関連文書頻度（t_i が出現するテキストの数）
- $df_i$-: 否定的な態度を示すテキスト（「反対」ラベルの付いたテキスト）に対する関連文書頻度

## 各用語のセンチメントスコアと極性の決定

前処理が完了すると、これまでに生成された BOW に含まれる各単語に関して、センチメントスコアが計算される。用語のセンチメントスコアを生成する最も広く使用されているメカニズムは、語彙内の「非常にまれな用語と非常に頻繁な用語の効果のバランスをとる」ことを目的とした TF-IDF である。また、TF-IDF は、局所的な用語頻度と全体的な用語頻度を組み合わせることによって、各用語の重要性を反映する傾向がある。テキスト j の用語 i の TF-IDF 値 $W_{ij}$ は、以下のようにして求める。

$W_{ij} = TF - IDF = tf_{i,j} * log_2(\frac{n}{df_i})$

ここで (i) $tf_{i,j}$は文書（スピーチ）j における用語 i の頻度（したがって、用語のローカル重み）、(ii) n はコーパス（討論におけるスピーチの連結）中の文書の総数、(iii) $df_i$ は用語 i を含む文書（スピーチ）の数（したがって用語に対するグローバル重み）である。TF-IDF に代わる方式として、以下のものがある。用語頻度（TF）、文書頻度（DF）、用語強度（TS）、用語寄与度（TC）。オピニオン・マイニングの文脈における TF-IDF の欠点は、用語のセンチメント傾向（方向性）を反映しないことです。したがって、目的のためには、代替のセンチメント強度重み付け方式か、用語 $t_i$ が肯定文書と否定文書の両方に出現する状況を考慮した TF-IDF 方式の代替形式のいずれかが必要です。後者に関しては、∆TF-IDF は「単語スコアを効率的に重み付けする直感的な汎用技術」を提供します。したがって、∆TF-IDF は、個々のクラス（我々の場合はセンチメント）に対する用語の偏った出現を考慮します。テキスト j の用語 i の ∆TF-IDF 値 $W_{ij}$ は、以下を使用して得られます。

$W_{i,j} = ∆TF−IDF = (tf_{i,j}*log_2(\frac{N^+}{df_i^+})) - (tf_{i,j}*(log_2\frac{N^-}{df_i^-})) = tf_{i,j}*log_2(\frac{N^+ * df_i^+}{df_i^+ * N^-})$

ここで (i) N+ は入力文書集合 D 中の肯定的なテキストの数、 (ii) N- は否定的なテキストの数、 (iii) $tf_{ij}$ はテキスト j 中の用語 $t_i$ の用語頻度、 (iv) $df_i$+は入力文書集合 D 中の肯定的テキストに関する用語 $t_i$ の文書頻度、 (v) ${df_i}$-は否定的テキストに関する用語 $t_i$ の文書頻度である。しかし、⊿TF-IDF スキームは、その ⊿TF-IDF 値に従って個々のテキストの感情分類に向けられたものである。本研究はドメイン固有の辞書の構築に重点を置いているため、用語の重み付けが文書ごとではなく、文書コレクション D 全体に関して考慮されるように、若干適応した ∆TF-IDF 重み付けスキームを提案している。この方式を ⊿TF-IDF′と呼ぶことにする。したがって、文書集合 D に関する用語 i の ∆TF-IDF′値 $W_{i,d}$ は、以下のようにして求められる。

$W =∆TF −IDF^{\prime} = (tf_i^+*log_2(\frac{N^+}{df_i^+})) - (tf_i^-*(log_2\frac{N^-}{df_i^-}))$

ここで、$tf_i^+$は肯定的なテキストに関する用語の頻度、$tf_i^-$は否定的なテキストに関する用語の頻度である。提案された ∆TF-IDF′スキームが提供する利点は、否定的および肯定的なテキストでの用語の出現を考慮して、各用語にセンチメントスコアを割り当てるために使用することができることである。このように、∆TF-IDF′スキームは、各用語のセンチメントスコアを決定するために使用されます。ステップ 3 が完了すると、BOW の各用語は、以下の形式の 8 タプルを構成することになります。

$<t_i, post_i, tf_i^+, tf_i^-, df_i^+, df_i^-, s_i>$

ここで、si は用語 i に関連するセンチメントスコアである。

## 辞書構築

ステップ 4 では、ドメイン固有の感情語彙が生成されます。すでに述べたように、語彙を生成するための 2 つの代替メカニズムが提案されています：(i) 直接生成と (ii) 適応。

最初のケースでは、その名が示すように、上記のステップに従って、ラベル付けされたソースデータから直接語彙を生成します。したがって、生成された BOW を取り出し、これを上述のレキシコンフォーマットに変換する。

適応メカニズムの場合、既存のドメインに依存しないセンチメント・レキシコン Lex を使用し、これを適応させてドメイン固有のレキシコン Lex′を生成することである。より具体的には、Lex の内容は Lex′にコピーされる。調整は次のように行われる。T と Lex の両方に含まれる用語 $t_i$ が与えられたとき、2つの関連する感情スコアが異なる極性を持つ場合、Lex′に関して計算された感情スコアから極性を採用する。T に含まれるが Lex に含まれない用語は、単に Lex′に追加されます。

# オピニオンマイニング

上記のように sentiment lexicon を生成すると、意見 (sentiment) マイニングの目的でこれらを適用できます。肯定的な意見または否定的な意見のいずれかを表現するものとして分類したい新しいテキストがある場合、まず POST を適用して、新しいドキュメントの各用語を品詞タグとペアにします。次に、新しいテキストの各用語を、関連する品詞タグを考慮して辞書で検索します。次に、新しいテキストの全体的なセンチメントスコア S が、以下を使用して計算されます。

$ S = \sum_{i=1}^{i=z}(s_i × \omega)$

ここで si は、語彙から得られる新しいテキスト（発話）中の用語 ti のセンチメントスコア（-1.0 ≤ si ≤ 1.0）、z は新しいテキスト中の用語の数、ω は新しいテキスト中の用語 ti の発生カウントです。出現回数は、新しいテキストにおける ti の出現頻度に従って計算することも、単に 2 値（1 が存在、0 が不在）として計算することもできる。以下では、この 2 つの手法をそれぞれ TF と Binary というラベルで参照する。新しいテキストの態度（クラス・ラベル）は、全体のセンチメント・スコア Sj に従って決定されます。この目的のために、クラス・ラベル・セットは {positive,negative,objective,neutral} となります。(i) 正は正のテキスト（政治討論の場合、動議に賛成）、(ii) 負は負のテキスト（動議に反対）、(iii) 目的は感情スコアが見つからなかったこと、および (iv) 感情スコアが互いを否定する中立を表します。実際には、最後の 2 つのクラス・ラベルはめったに発生しないことが判明しました。

# 評価

本節では，提案する分野別辞書生成システムの評価について述べる．評価では，提案する手法を用いた訓練セットを用いて分野別辞書を生成し，テストセットを用いてオピニオンミニグに対する有効性を評価した．この目的のために、2 つの議会討論コーパスが使用された。UKHCD-3 と UKHCD-44 である。これらのデータセットに関する詳細は以下の 5.1 節に示す．学習セット（UKHCD-3）を用いて、PoLex と PoliSentiWordNet という 2 つの辞書を生成した。前者は直接生成、後者は（SentiWordNet 3.0 をベースにした）適応的な生成である。PoLex は 170,703 語、PoliSentiWordNet は 258,353 語で構成されている。次に、生成された語彙を用いて、テストデータに感情スコアを付与し、討論者（話者）の態度を決定した。この態度は、最終的に発言者の投票の仕方から分かっているため、予測された態度と既知の態度とを比較することができる。得られた結果は 5.2 節で述べる。

## テストデータ

### データセットの取得

#### 取得用コマンド

http://parser.theyworkforyou.com/hansard.html  
 取得対象は元の論文に合わせて 2002 年 1 月〜2013 年 12 月。

> rsync -az --progress --exclude '.svn' --exclude 'tmp/' --relative data.theyworkforyou.com::parldata/scrapedxml/debates/debates[YYYY]-\* .

でとれる。詳細な推奨オプションはリンク先参照。

## データハンドリング

本論文では、英国下院の討論を参考にした。英国議会の両院、下院と貴族院は、討論を行い、各討論終了後に投票（「賛成」または「反対」のどちらか）を行うことで決定を下す。下院の議事録は XML 形式でオンライン（TheyWorkForYou.com）で公開されているため、容易に入手することができます。このコレクションがもたらす第二の利点は、討論者（国会議員）の態度（討論終了時に「賛成」に投票した議員は肯定的、「反対」に投票した議員は否定的）を知ることができる点である。したがって、スピーチの極性を予測することに関して、我々のドメイン固有の語彙生成アプローチを用いることの有効性を評価することができる。筆者らは、TheyWorkForYou.com www サイトから、2002 年 1 月から 2013 年 3 月までの過去 11 年間に行われた英国下院の討論に関連するスピーチを取得した。QDAMiner4 を用いて、XML 討論記録から目的のテキスト情報を抽出した。また、投票しなかった議員のスピーチは無視し、50 語以下のスピーチについては、価値ある感情態度が関連づけられないと推測されるため、無視した。これらのスピーチは、UK House of Commons Debate (UKHCD) dataset 3 および 4 (UKHCD-3 および UKHCD-4) と呼ばれる「トレーニング」セットと「テスト」セットに分けられまし た。UKHCD-3 は 2002 年 1 月から 2012 年 7 月までに行われた討論のスピーチを、UKHCD-4 は 2012 年 8 月から 2013 年 3 月までに行われた討論のスピーチを収録しています。この 2 つのデータセットに関するいくつかの統計データを表 1 に示す。

## 結果

センチメント分析の課題の 1 つは、「グランドトゥルース」データがないことです。場合によっては、手作業でそのようなデータを構築することが可能ですが、これには主観が含まれ、かなりのリソースを必要とします（重要なベンチマークデータを構築することができない程度に）。そこで、PoLex と PoliSentiWordNet を用いて予測された態度と、各議論終了時に「賛成」「反対」のどちらに投票したかによって定義される話者の「態度」を比較し、提案する分野別語彙生成法を評価しました。そのため、演説中の発言者の態度は、最終的にどのように投票するかを反映していると仮定する必要があった。つまり、演説者が討論中に「考えを変える」ことはないと仮定している。その結果を表 2 および表 3 に示す。表 2 は、Polex、PoliSentiWordNet、汎用の SentiWordNet 3.0 を用いた場合の混同行列のデータであり、表 3 は、Polex、PoliSentiWordNet、汎用の SentiWordNet 3.0 を用いた場合のデータである。それぞれのケースで、TF（Term Frequenct）出現回数アプローチとバイナリ（Binary）出現回数アプローチを使用した場合を比較していることに注意してください。表 3 は、表 2 に示した混同行列 6 から（Polex、（PoliSentiWordNet、汎用 SentiWordNet 3.0 を使用して）得られた精度、再現率、F メジャー、平均精度の値を示したものである。表 3 は、(i)分野別辞書を用いた場合の平均値に対して、若干の改善が見られること、(ii)Polex と PolSentiWordNet の両方が同様の結果をもたらすことを示しています。また、Polex と PolSentiWordNet の結果はほぼ同じであった。さらに詳しく見ると、すべての手法が肯定的な態度の予測に関して、否定的な態度（Nay）よりもよく働いているという興味深い観察がなされている。この理由は今のところ不明である。しかし、このコーパスは純粋な政治コーパスではなく、様々なトピックの討論が含まれているため、このような結果になったのではないかと推測される。

# 結論

本論文では、分野別感情辞書を生成するための 2 つのアプローチ、(i)直接生成と(ii)適応について述べた。この 2 つのアプローチは、2 つの政治的な感情辞書（訓練用に英国下院の討論を使用）を生成することで評価された。1 つ目の Polex は直接生成法を用い、2 つ目の PoliSentiWordNet は適応法を用いて生成された。これらの語彙の有効性は、テストスピーチ（英国下院の討論会から抜粋）のセンチメント態度を予測するために使用することで評価された。その結果、汎用的な感情語彙（SentiWordNet 3.0）を使用した場合よりも、ポジティブな態度の予測に関して顕著な改善を示し、全体的にわずかな改善を示しました。また、否定的な態度の予測については、すべてのアプローチで効果が低く、その理由は不明であるため、さらなる研究のための興味深い道筋を提供するものである。
